<!DOCTYPE html>
<html>
<head>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
</head>
<body class="container mt-5">

<h2>Todo List</h2>

<form action="/add-task" method="POST">
  <input type="text" name="title" class="form-control mb-2" required>
  <button class="btn btn-primary">Thêm</button>
</form>

<ul class="list-group mt-3">
  <% tasks.forEach(task => { %>
    <li class="list-group-item d-flex justify-content-between align-items-center">

      <span class>
        <%= task.title %>
      </span>

      <div>

        <% if (!task.done) { %>
          <form action="/done/<%= task._id %>" method="POST" style="display:inline;">
            <button class="btn btn-success btn-sm">Hoàn thành</button>
          </form>
        <% } %>

        <form action="/delete/<%= task._id %>" method="POST" style="display:inline;">
          <button class="btn btn-danger btn-sm">Xóa</button>
        </form>

      </div>

    </li>
  <% }) %>
</ul>

<div class="progress mb-3">
  <div 
    class="progress-bar 
      <%= percent == 100 ? 'bg-success' : 'bg-primary' %>" 
    role="progressbar" 
    style="width: <%= percent %>%;">
    
    <%= Math.round(percent) %>%
    
  </div>
</div>

</body>
</html>